layout: photo
title: DIGGER业务监控
tags:
- 原创
- 监控预警
- Elasticsearch
photos:
  - http://siye1982.github.io/img/blog/digger/digger.png
date: 2016-12-24 10:12:31
categories: 监控预警
---

# 系统定位
业务监控, 主要侧重对业务数据的实时监控, 以日志的方式进行数据收集, 对业务数据进行深入的统计分析, 帮助业务方发现问题, 定位问题根源. 这其中数据分为: 业务自身输出的业务日志(比如: 提单, 推单, 接单等状态数据), 业务异常, 报警事件等. 
<!--more-->
发现问题原因之后我们需要解决问题, 最终目的是可以基于我们分析的结果给运维动作做出决策, 以达到自动化运维的目的. 另外, 明确系统用户将有助于把控业务监控产品的设计方向, 业务监控系统的第一用户是RD, 不是老板, 我们是要帮助RD更快的发现问题, 预知问题, 提供标准化解决问题的建议.

# 概要设计
## 数据模型
![数据模型](http://siye1982.github.io/img/blog/digger/数据模型.png)


## 数据流向
考虑到对业务代码做到最小入侵, 以及现在正在建设的日志中心, 通过日志输出业务数据的方式是成本最小, 职责划分最清晰的方案. 我们将业务异常直接流入到日志中心的Elasticsearch集群中. 
## 业务数据流

## 事件数据流
现有报警数据种类繁多, 每天产生的数量庞大, 这其中有相当一部分数据是因为阈值设定不合理而引起的误报而是会降低报警的实用性, 我们需要实时收集这些报警事件并做二次统计分析, 报警事件由多种方式发出, 所以需要有独立的collector组件负责收集这些事件, 后续其他类型业务数据的收集也可以通过collector完成.由于异常数据, 业务数据, 事件数据都有各自的结构, 为了简化日志格式化处理过程, 我们需要封装一个client来做这个事情, 尽量使日志格式化的动作对业务方透明.
# 预测报警

# 碰到的问题




<div style="margin-top: 15px; font-size: 11px;color: #cc0000;"><p align="center"><strong>（转载本站文章请注明作者和出处 <a href="http://siye1982.github.io">Panda</a>）</strong></p></div>

